<div class="post-card">
  <div class="post-card-info" (click)="handleMain()">
    <div class="post-card-header">
      <div class="author">
        <div class="post-card-avatar">
          <img class="avatar" [src]="post.avatar" alt="avatar" />
        </div>
      </div>
      <div class="post-card__meta">
        <span class="name">{{post.author}}</span>
        <div style="display: flex; flex-direction: row"></div>
        <span style="font-size: 12px; opacity: 20%" *ngIf="post.public"
          >{{ formatDate(post.time) }} - Công khai</span
        >
        <span *ngIf="!post.public"
          >{{ formatDate(post.time) }} - Nội bộ tổ chức</span
        >
      </div>
      <div
        class="post-card-popular-dot"
        [ngStyle]="{
          'background-color': popular === 0 ? '#68C579' : popular === 1 ? '#7A83FF' : popular === 2 ? '#FFA67A' : '#FF7A7C'
        }"
      ></div>
    </div>
    <div class="post-card-body">
      <div class="post-card-title">{{ post.title }}</div>
      <div class="post-card-description">{{ post.description }}</div>
      <div class="post-card-tags">
        <span class="post-card-tag" *ngFor="let tag of post.tags"
          >#{{ tag }}</span
        >
      </div>
    </div>

    <div class="post-card-stats">
      <div class="post-card-vote">
        <div (click)="handleUpvote()" class="post-card-vote-item">
          <span>{{ post.upvote }}</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-chevron-up-icon lucide-chevron-up"
          >
            <path d="m18 15-6-6-6 6" />
          </svg>
        </div>
        <div (click)="handleDownvote()" class="post-card-vote-item">
          <span>{{ post.downvote }}</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-chevron-down-icon lucide-chevron-down"
          >
            <path d="m6 9 6 6 6-6" />
          </svg>
        </div>
      </div>
      <div class="post-card-action">
        <div (click)="handleReport()" class="report">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-flag-icon lucide-flag"
          >
            <path
              d="M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528"
            />
          </svg>
        </div>
        <div (click)="handleSave()" class="save">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-bookmark-icon lucide-bookmark"
          >
            <path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z" />
          </svg>
        </div>
        <div (click)="handleComment()" class="comment">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-message-circle-icon lucide-message-circle"
          >
            <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z" />
          </svg>
          <span> {{ post.comment }}</span>
        </div>
      </div>
    </div>
    <div class="post-card-sumary" (click)="handleSummary()" title="Tóm tắt">
      Tóm tắt nội dung bài viết
    </div>
  </div>

  <div class="post-card-control" *ngIf="showControls">
    <div
      class="post-card-separator"
      [ngClass]="{
    'rejected': post.status.toLowerCase() === 'rejected',
    'pending': post.status.toLowerCase() === 'pending',
    'accepted': post.status.toLowerCase() === 'accepted'
  }"
    ></div>
    <div
      class="post-card-control-button"
      *ngIf="post.status?.toLowerCase() === 'accepted'"
    >
      <button (click)="handleEdit()" title="Sửa">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-square-pen-icon lucide-square-pen"
        >
          <path
            d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
          />
          <path
            d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"
          />
        </svg>
      </button>
      <button (click)="handleDelete()" title="Xóa">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          color=" red"
          class="lucide lucide-trash2-icon lucide-trash-2"
        >
          <path d="M10 11v6" />
          <path d="M14 11v6" />
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
          <path d="M3 6h18" />
          <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
        </svg>
      </button>
    </div>
    <div
      class="post-card-control-button"
      *ngIf="post.status?.toLowerCase() === 'rejected'"
    >
      <button (click)="handleDelete()" title="Xóa">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          color=" red"
          class="lucide lucide-trash2-icon lucide-trash-2"
        >
          <path d="M10 11v6" />
          <path d="M14 11v6" />
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
          <path d="M3 6h18" />
          <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
        </svg>
      </button>
    </div>
    <div
      class="post-card-control-button"
      *ngIf="post.status?.toLowerCase() === 'pending'"
    >
      <div class="button" (click)="handleApprove()" title="chấp nhận">
        Chấp nhận
      </div>
      <div
        class="button"
        (click)="handleRejected()"
        style="color: #ff7a7c"
        title="Từ chối"
      >
        Từ chối
      </div>
    </div>
  </div>
</div>
