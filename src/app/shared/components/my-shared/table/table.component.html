<!-- table.component.html -->
<div class="table-father">
  <table class="main-table">
    <thead class="table-header">
      <th *ngIf="needNo" style="text-align: center">STT</th>
      <th *ngFor="let header of headers">{{ header.label }}</th>
      <th
        *ngIf="needDelete || needEdit || needViewResult"
        style="min-width: 100px; text-align: center"
      ></th>
    </thead>
    <tbody class="table-content">
      <tr *ngFor="let row of data; let i = index">
        <td *ngIf="needNo" style="text-align: center">
          {{
            i + 1 + amountDataPerPage * (currentIndex ? currentIndex - 1 : 0)
          }}
        </td>

        <td *ngFor="let header of headers" [ngClass]="header.value + '-column'">
          <ng-container *ngIf="templateMap[header.value]; else defaultCell">
            <ng-container
              *ngTemplateOutlet="
                templateMap[header.value];
                context: { $implicit: row, rowIndex: i }
              "
            ></ng-container>
          </ng-container>
          <ng-template #defaultCell>
            {{ row[header.value] }}
          </ng-template>
        </td>

        <td *ngIf="needDelete || needEdit || needViewResult">
          <div class="btn-actions">
            <div class="edit" *ngIf="needEdit">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                style="cursor: pointer; width: 24px; height: 24px"
                (click)="handleEditClick(row[idSelect])"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-square-pen-icon lucide-square-pen"
              >
                <path
                  d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                />
                <path
                  d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"
                />
              </svg>
            </div>
            <div class="delete" *ngIf="needDelete">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                (click)="handleDeleteClick(row[idSelect])"
                style="cursor: pointer; width: 24px; height: 24px"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-trash2-icon lucide-trash-2"
              >
                <path d="M10 11v6" />
                <path d="M14 11v6" />
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
                <path d="M3 6h18" />
                <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
              </svg>
            </div>
            <app-interactive-button
              *ngIf="needViewResult"
              [buttonText]="'Result'"
              [buttonType]="'primary'"
              [buttonSize]="'small'"
              (buttonClick)="handleNavigation(row['id'], row['userId'])"
              class="result"
            >
              <div class="view-icon"></div>
            </app-interactive-button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
