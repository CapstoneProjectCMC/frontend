<div class="profile-popup" [ngClass]="variant">
  <div class="avt-bg">
    <img [src]="user.backgroundUrl || backgroundDefault" alt="" class="bg" />
    <img [src]="user.avatarUrl || avatarDefault" alt="" class="avt" />
  </div>
  <div class="general-infor">
    <span class="display-name">{{user.displayName}}</span>
    <span class="bio">{{user.bio}}</span>
    <div class="follow" (click)="toggleFollowPopup()">
      <div class="follow-item">
        <span class="follow-item-label">Người theo dõi</span>
        <span class="follow-item-value">{{0}}</span>
      </div>
      <div class="follow-item">
        <span class="follow-item-label">Đang theo dõi</span>
        <span class="follow-item-value">{{0}}</span>
      </div>
    </div>
    <!-- Overlay -->
    @if (showFollowPopup) {
      <div
        class="follow-popup-overlay"
        (click)="showFollowPopup = false"
        >
        <!-- Popup -->
        <div class="follow-popup" (click)="$event.stopPropagation()">
          <!-- Nút đóng -->
          <button class="close-btn" (click)="showFollowPopup = false">×</button>
          <!-- Nội dung popup -->
          <app-follow-popup
            [follower]="follower"
            [following]="following"
          ></app-follow-popup>
        </div>
      </div>
    }

    <div class="line"></div>
    <div class="detail-infor">
      <div class="detail-infor-item">
        <span class="detail-infor-label">Họ tên: </span>
        <span class="detail-infor-value"
          >{{user.firstName+" "+user.lastName}}</span
          >
        </div>
        <div class="detail-infor-item">
          <span class="detail-infor-label">Học vấn: </span>
          <span class="detail-infor-value"
            >{{getEducationLabel(user.education)}}</span
            >
          </div>
          <div class="detail-infor-item">
            <span class="detail-infor-label">Giới tính: </span>
            <span class="detail-infor-value">{{user.gender?"Nữ":"Nam"}}</span>
          </div>
          <div class="detail-infor-item">
            <span class="detail-infor-label">Quyền hạn: </span>
            <span class="detail-infor-value">{{user.roles.join(', ')}}</span>
          </div>
          <div class="detail-infor-item">
            <span class="detail-infor-label">Ngày sinh: </span>
            <span class="detail-infor-value">{{user.dob}}</span>
          </div>
          <div class="detail-infor-item">
            <span class="detail-infor-label">Thành phố: </span>
            <span class="detail-infor-value">{{user.city}}</span>
          </div>
        </div>
        <div class="line"></div>
        <div class="social-link">
          @for (link of user.links; track link) {
            <div class="social-link-item">
              <a [href]="link" target="_blank">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-link2-icon lucide-link-2"
                  >
                  <path d="M9 17H7A5 5 0 0 1 7 7h2" />
                  <path d="M15 7h2a5 5 0 1 1 0 10h-2" />
                  <line x1="8" x2="16" y1="12" y2="12" />
                </svg>
                <span
            style="
              width: 80%;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
            "
                  >{{ link }}</span
                  >
                </a>
              </div>
            }
          </div>
        </div>
        @if (variant === 'personal') {
          <div class="edit-profile-btn">
            <app-button
              style="display: flex; gap: 10px; justify-content: center"
              [width]="'100%'"
              [height]="'40px'"
              [variant]="'outline'"
              (onClick)="onClickEdit?.()"
              >Cập nhật
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-pencil-icon lucide-pencil"
                >
                <path
                  d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"
                  />
                  <path d="m15 5 4 4" />
                </svg>
              </app-button>
            </div>
          }
        </div>
