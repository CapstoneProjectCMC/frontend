<div class="overlay" [class.show]="isVisible" (click)="onClose()">
  <div
    class="modal"
    [class.show]="isVisible"
    (click)="$event.stopPropagation()"
  >
    <button class="close-btn" (click)="onClose()">×</button>

    <h2>Quên mật khẩu</h2>

    <p *ngIf="step === 1">Nhập email để nhận mã OTP</p>
    <p *ngIf="step === 2">Nhập OTP và mật khẩu mới</p>

    <!-- Step 1: nhập email -->
    <form *ngIf="step === 1" (ngSubmit)="sendOtp()">
      <input
        type="email"
        [(ngModel)]="email"
        name="email"
        placeholder="Email"
        required
      />
      <button type="submit" [disabled]="loading">Gửi OTP</button>
    </form>

    <!-- Step 2: nhập OTP + mật khẩu -->
    <form *ngIf="step === 2" (ngSubmit)="confirmReset()">
      <input
        type="text"
        [(ngModel)]="otp"
        name="otp"
        placeholder="Mã OTP"
        required
      />
      <input
        type="password"
        [(ngModel)]="newPassword"
        name="newPassword"
        placeholder="Mật khẩu mới"
        required
      />
      <button type="submit" [disabled]="loading">Xác nhận</button>
    </form>

    <!-- Feedback -->
    <p class="error" *ngIf="errorMsg">{{ errorMsg }}</p>
    <p class="success" *ngIf="successMsg">{{ successMsg }}</p>
  </div>
</div>
