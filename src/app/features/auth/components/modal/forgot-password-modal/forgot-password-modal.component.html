<div class="overlay" [class.show]="isVisible" (click)="onClose()">
  <div
    class="modal"
    [class.show]="isVisible"
    (click)="$event.stopPropagation()"
    >
    <button class="close-btn" (click)="onClose()">×</button>

    <h2>Quên mật khẩu</h2>

    @if (step === 1) {
      <p>Nhập email để nhận mã OTP</p>
    }
    @if (step === 2) {
      <p>Nhập OTP và mật khẩu mới</p>
    }

    <!-- Step 1: nhập email -->
    @if (step === 1) {
      <form (ngSubmit)="sendOtp()">
        <input
          type="email"
          [(ngModel)]="email"
          name="email"
          placeholder="Email"
          required
          />
          <button type="submit" [disabled]="loading">Gửi OTP</button>
        </form>
      }

      <!-- Step 2: nhập OTP + mật khẩu -->
      @if (step === 2) {
        <form (ngSubmit)="confirmReset()">
          <input
            type="text"
            [(ngModel)]="otp"
            name="otp"
            placeholder="Mã OTP"
            required
            />
            <input
              type="password"
              [(ngModel)]="newPassword"
              name="newPassword"
              placeholder="Mật khẩu mới"
              required
              />
              <button type="submit" [disabled]="loading">Xác nhận</button>
            </form>
          }

          <!-- Feedback -->
          @if (errorMsg) {
            <p class="error">{{ errorMsg }}</p>
          }
          @if (successMsg) {
            <p class="success">{{ successMsg }}</p>
          }
        </div>
      </div>
